"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[831],{831:function(e,t,n){n.r(t),n.d(t,{default:function(){return m}});var a=n(683),r=n(165),s=n(861),c=n(439),i=n(791),l=n(243),o=n(184);function u(e){var t=e.onInput,n=(e.errorMessage,(0,i.useState)()),a=(0,c.Z)(n,2),r=a[0],s=a[1],l=(0,i.useState)(),u=(0,c.Z)(l,2),d=u[0],p=u[1];(0,i.useEffect)((function(){if(r){var e=new FileReader;e.readAsDataURL(r),e.onload=function(){p(e.result)}}}),[r]);return(0,o.jsx)(i.Fragment,{children:(0,o.jsxs)("label",{className:"btn-file-upload mb-3 ".concat(d&&"is-active"),children:[(0,o.jsx)("input",{type:"file",className:"d-none",accept:".jpg,jpeg,.png",name:"image",onChange:function(e){var n,a=e.target.files;a&&1===a.length&&(n=a[0],s(n)),t(n)}}),!d&&(0,o.jsx)("div",{className:"label",children:"Please pick an image."}),d&&(0,o.jsx)("img",{src:d,alt:""})]})})}function d(e){var t=e.updatePost,n=e.refreshPost,a=e.isActive,d=e.editData,p=(0,i.useState)(d.title),m=(0,c.Z)(p,2),h=m[0],f=m[1],v=(0,i.useState)(d.icon),x=(0,c.Z)(v,2),g=x[0],b=x[1],j=(0,i.useState)(d.image),N=(0,c.Z)(j,2),Z=N[0],y=N[1],w=(0,i.useState)(d.description),S=(0,c.Z)(w,2),k=S[0],C=S[1],D=(0,i.useState)(!1),P=(0,c.Z)(D,2),A=P[0],L=P[1],F=(0,i.useState)(),I=(0,c.Z)(F,2),M=I[0],E=I[1],R=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return L(!0),(t=new FormData).append("title",h),t.append("icon",g),t.append("image",Z),t.append("description",k),e.prev=6,e.next=9,l.Z.post("".concat("http://localhost:8000/api/muthu-dev","/service"),t).then((function(){return n()}));case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(6),E(e.t0.message+" please try again"||0);case 14:L(!1);case 15:case"end":return e.stop()}}),e,null,[[6,11]])})));return function(){return e.apply(this,arguments)}}(),T=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l.Z.patch("".concat("http://localhost:8000/api/muthu-dev","/service/").concat(t),{title:h,icon:g,image:Z,description:k}).then((function(){return n()}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0.message);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}();return(0,o.jsxs)("div",{className:"card",children:[(0,o.jsxs)("div",{className:"card-header d-flex align-items-center justify-content-between ps-3",children:["Create Service",(0,o.jsx)("div",{className:"action-group",children:(0,o.jsx)("button",{type:"button",className:"btn btn-light",onClick:function(){a(!1)},children:(0,o.jsx)("i",{className:"bi bi-x-lg"})})})]}),(0,o.jsxs)("div",{className:"card-body",children:[(0,o.jsxs)("form",{onSubmit:function(e){e.preventDefault(),t?T(d.id):R(),f(""),b(""),y(""),C(""),a(!1)},children:[(0,o.jsx)("input",{type:"text",className:"form-control mb-3",placeholder:"Title",name:"title",value:h,onChange:function(e){return f(e.target.value)}}),(0,o.jsx)("input",{type:"text",className:"form-control mb-3",placeholder:"Icon html",name:"icon",value:g,onChange:function(e){return b(e.target.value)}}),(0,o.jsx)(u,{onInput:function(e){return y(e)},errorMessage:"Please upload an image"}),(0,o.jsx)("textarea",{className:"form-control mb-3",rows:"3",placeholder:"Description",name:"description",value:k,onChange:function(e){return C(e.target.value)}}),(0,o.jsx)("button",{className:"btn btn-primary",type:"submit",disabled:!(h&&g),children:"Add"})]}),A&&(0,o.jsx)("div",{className:"alert alert-primary mt-3",role:"alert",children:"Loading..."}),M&&(0,o.jsx)("div",{className:"alert alert-danger mt-3",role:"alert",children:M})]})]})}function p(){var e=(0,i.useState)(!1),t=(0,c.Z)(e,2),n=t[0],u=t[1],p=(0,i.useState)(!1),m=(0,c.Z)(p,2),h=m[0],f=m[1],v=(0,i.useState)(!1),x=(0,c.Z)(v,2),g=x[0],b=x[1],j=(0,i.useState)(!1),N=(0,c.Z)(j,2),Z=N[0],y=N[1],w=(0,i.useState)(),S=(0,c.Z)(w,2),k=S[0],C=S[1],D=(0,i.useState)({title:"",icon:"",image:"",description:""}),P=(0,c.Z)(D,2),A=P[0],L=P[1],F=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y(!0),e.prev=1,e.next=4,l.Z.get("".concat("http://localhost:8000/api/muthu-dev","/service")).then((function(e){return u(e.data)}));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),C(e.t0.message||"Something went wrong");case 9:y(!1);case 10:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(){return e.apply(this,arguments)}}(),I=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l.Z.delete("".concat("http://localhost:8000/api/muthu-dev","/service/").concat(t));case 3:F(),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0.message);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}();(0,i.useEffect)((function(){F()}),[]);return(0,o.jsx)(i.Fragment,{children:(0,o.jsxs)("div",{className:"card",id:"card",children:[(0,o.jsx)("div",{className:"card-header",children:"Service List"}),(0,o.jsxs)("div",{className:"card-body",children:[Z&&(0,o.jsx)("div",{className:"alert alert-primary mt-3",role:"alert",children:"Loading post ..."}),k&&(0,o.jsx)("div",{className:"alert alert-danger mt-3",role:"alert",children:k}),n&&(0,o.jsx)("div",{className:"row",children:n.map((function(e){return(0,o.jsx)("div",{className:"col-4 mb-4",children:(0,o.jsxs)("div",{className:"card",children:[(0,o.jsxs)("div",{className:"card-header d-flex align-items-center justify-content-between ps-3",children:[e.title," ",(0,o.jsxs)("div",{className:"action-group",children:[(0,o.jsx)("button",{type:"button",className:"btn btn-light",onClick:function(){var t;t=(0,a.Z)({},e),L(t),f(!0),b(!0)},children:(0,o.jsx)("i",{className:"bi bi-pencil-square"})}),(0,o.jsx)("button",{type:"button",className:"btn btn-light",onClick:function(){I(e.id)},children:(0,o.jsx)("i",{className:"bi bi-x-lg"})})]})]}),(0,o.jsxs)("div",{className:"card-body",children:[(0,o.jsx)("p",{dangerouslySetInnerHTML:{__html:e.icon}}),e.image&&(0,o.jsx)("figure",{className:"image-box",children:(0,o.jsx)("img",{src:"http://localhost:8000/"+e.image,alt:""})}),e.description]})]})},e.id)}))}),g&&(0,o.jsx)(d,{editData:A,updatePost:h,isActive:function(e){b(e)},refreshPost:F}),!g&&!Z&&(0,o.jsx)("button",{className:"btn btn-info",onClick:function(){return b(!0)},children:"Add new"})]})]})})}function m(){return(0,o.jsx)("div",{className:"service-panel",children:(0,o.jsx)(p,{})})}}}]);
//# sourceMappingURL=831.ed5e1cf2.chunk.js.map